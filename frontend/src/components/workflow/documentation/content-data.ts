export const dataProcessingContent = `# 📊 数据处理指南

本章详细介绍变量系统和数据处理功能，是实现复杂自动化的基础。

---

## 📦 变量基础

### 什么是变量？

变量就像一个带标签的盒子，可以存放各种数据。你可以：
- 给盒子起个名字（变量名）
- 往盒子里放东西（赋值）
- 从盒子里取东西（引用）
- 换掉盒子里的东西（修改）

### 变量类型

Web RPA支持5种变量类型：

| 类型 | 说明 | 示例 | 用途 |
|------|------|------|------|
| 字符串 | 文本数据 | \`"Hello"\`、\`"用户名"\` | 存储文字、网址等 |
| 数字 | 整数或小数 | \`42\`、\`3.14\`、\`-10\` | 计数、计算、索引 |
| 布尔 | 真或假 | \`true\`、\`false\` | 条件判断、开关 |
| 列表 | 有序集合 | \`[1, 2, 3]\`、\`["a", "b"]\` | 存储多个数据 |
| 字典 | 键值对集合 | \`{"name": "小明", "age": 18}\` | 存储结构化数据 |

### 创建变量的方式

#### 方式1：使用"设置变量"模块

1. 拖入**设置变量**模块
2. 填写变量名和值
3. 选择变量类型

#### 方式2：在日志面板快捷创建

1. 打开底部日志面板的**全局变量**标签页
2. 点击 **+添加变量** 按钮
3. 输入变量名、选择类型、填写值

#### 方式3：模块自动创建

某些模块会自动创建变量：
- **获取元素信息**：将提取的数据保存到变量
- **API请求**：将响应结果保存到变量
- **AI大脑**：将AI回复保存到变量
- **循环/遍历**：自动创建循环索引、当前元素等变量（如 \`item\`、\`index\`、\`loop_index\`）

### 变量智能提示

在任何支持变量的输入框中：
- 输入 \`{\` 会自动弹出变量列表
- 支持模糊搜索快速找到变量
- 显示变量来源和类型
- **循环变量**（如 \`item\`、\`index\`、\`loop_index\`）也会自动识别并显示在提示中

---

## 🔗 变量引用语法详解

### 基础引用

在任何输入框中使用 \`{变量名}\` 引用变量：

\`\`\`
{用户名}      → 获取"用户名"变量的值
\`\`\`

### 在文本中混合使用

\`\`\`
你好，{用户名}！欢迎来到{网站名称}。
你的订单号是：{订单号}，金额：{金额}元。
\`\`\`

### 列表索引访问

列表的索引从 **0** 开始：

\`\`\`
{列表名[0]}    → 第1个元素
{列表名[1]}    → 第2个元素
{列表名[2]}    → 第3个元素
...
\`\`\`

**负数索引**（从末尾开始）：

\`\`\`
{列表名[-1]}   → 最后1个元素
{列表名[-2]}   → 倒数第2个元素
{列表名[-3]}   → 倒数第3个元素
...
\`\`\`

**示例**：

假设 \`水果\` = \`["苹果", "香蕉", "橙子", "葡萄"]\`

| 表达式 | 结果 |
|--------|------|
| \`{水果[0]}\` | 苹果 |
| \`{水果[1]}\` | 香蕉 |
| \`{水果[-1]}\` | 葡萄 |
| \`{水果[-2]}\` | 橙子 |

### 字典键访问

\`\`\`
{字典名[键名]}       → 获取指定键的值
{字典名["键名"]}     → 带引号的键名（键名有特殊字符时使用）
{字典名['键名']}     → 单引号也可以
\`\`\`

**示例**：

假设 \`用户\` = \`{"name": "小明", "age": 18, "city": "北京"}\`

| 表达式 | 结果 |
|--------|------|
| \`{用户[name]}\` | 小明 |
| \`{用户[age]}\` | 18 |
| \`{用户[city]}\` | 北京 |

### 嵌套访问

可以连续使用 \`[]\` 访问嵌套的数据结构：

**列表中的字典**：

假设 \`商品列表\` = \`[{"name": "手机", "price": 2999}, {"name": "电脑", "price": 5999}]\`

| 表达式 | 结果 |
|--------|------|
| \`{商品列表[0]}\` | {"name": "手机", "price": 2999} |
| \`{商品列表[0][name]}\` | 手机 |
| \`{商品列表[0][price]}\` | 2999 |
| \`{商品列表[1][name]}\` | 电脑 |
| \`{商品列表[-1][price]}\` | 5999 |

**字典中的列表**：

假设 \`用户\` = \`{"name": "小明", "hobbies": ["读书", "游戏", "运动"]}\`

| 表达式 | 结果 |
|--------|------|
| \`{用户[hobbies]}\` | ["读书", "游戏", "运动"] |
| \`{用户[hobbies][0]}\` | 读书 |
| \`{用户[hobbies][-1]}\` | 运动 |

**多层嵌套**：

假设 \`数据\` = \`{"users": [{"name": "小明", "scores": [90, 85, 92]}]}\`

\`\`\`
{数据[users][0][name]}        → 小明
{数据[users][0][scores][0]}   → 90
{数据[users][0][scores][-1]}  → 92
\`\`\`

---

## 📋 列表操作详解

### 创建列表

使用**设置变量**模块，类型选择"列表"：

\`\`\`json
[1, 2, 3]
["苹果", "香蕉", "橙子"]
[{"name": "商品1"}, {"name": "商品2"}]
[]  // 空列表
\`\`\`

### 列表操作模块

| 操作 | 说明 | 参数 |
|------|------|------|
| 追加元素 | 在列表末尾添加元素 | 要添加的值 |
| 插入元素 | 在指定位置插入元素 | 索引、要插入的值 |
| 删除元素 | 删除第一个匹配的元素 | 要删除的值 |
| 弹出元素 | 删除指定位置的元素并返回 | 索引（可选，默认-1） |
| 清空列表 | 删除所有元素 | 无 |
| 获取长度 | 获取列表元素个数 | 保存到变量 |
| 反转列表 | 颠倒元素顺序 | 无 |
| 排序 | 升序或降序排列 | 排序方式 |
| 去重 | 删除重复元素 | 无 |
| 合并列表 | 将另一个列表合并进来 | 要合并的列表 |

### 操作示例

**追加元素**：
\`\`\`
原列表：[1, 2, 3]
追加：4
结果：[1, 2, 3, 4]
\`\`\`

**插入元素**：
\`\`\`
原列表：[1, 2, 3]
在索引1插入：99
结果：[1, 99, 2, 3]
\`\`\`

**弹出元素**：
\`\`\`
原列表：[1, 2, 3]
弹出索引0
结果：[2, 3]，返回值：1
\`\`\`

**排序**：
\`\`\`
原列表：[3, 1, 4, 1, 5, 9, 2, 6]
升序排序
结果：[1, 1, 2, 3, 4, 5, 6, 9]
\`\`\`

---

## 📖 字典操作详解

### 创建字典

使用**设置变量**模块，类型选择"字典"：

\`\`\`json
{"name": "小明", "age": 18}
{"title": "文章标题", "content": "文章内容", "tags": ["技术", "教程"]}
{}  // 空字典
\`\`\`

### 字典操作模块

| 操作 | 说明 | 参数 |
|------|------|------|
| 设置键值 | 添加或修改键值对 | 键名、值 |
| 删除键 | 删除指定的键 | 键名 |
| 获取值 | 获取指定键的值 | 键名、保存到变量 |
| 获取所有键 | 返回所有键名的列表 | 保存到变量 |
| 获取所有值 | 返回所有值的列表 | 保存到变量 |
| 检查键存在 | 检查键是否存在 | 键名、保存到变量 |

### 操作示例

**设置键值**：
\`\`\`
原字典：{"name": "小明"}
设置键 "age" 值 18
结果：{"name": "小明", "age": 18}
\`\`\`

**获取所有键**：
\`\`\`
字典：{"name": "小明", "age": 18, "city": "北京"}
获取所有键
结果：["name", "age", "city"]
\`\`\`

---

## 📊 数据表格操作

数据表格是采集数据的核心功能，支持实时预览、编辑和导出。

### 自动采集数据

使用**获取元素信息**模块时，填写"存储的列名"字段，数据会自动添加到表格：

\`\`\`
获取元素信息
  选择器：.product-title
  存储的列名：商品名称

获取元素信息
  选择器：.product-price
  存储的列名：价格
\`\`\`

### 数据表格操作模块

Web RPA提供了一组专门的数据表格操作模块：

| 模块 | 说明 | 主要参数 |
|------|------|----------|
| 📝 添加数据行 | 添加一行数据 | JSON格式的行数据 |
| 📊 添加数据列 | 添加新列 | 列名、默认值 |
| ✏️ 设置单元格 | 修改指定单元格 | 行索引、列名、值 |
| 📖 获取单元格 | 读取单元格值 | 行索引、列名、存储变量 |
| 🗑️ 删除数据行 | 删除指定行 | 行索引（支持负数） |
| 🧹 清空数据表 | 清空所有数据 | 无 |
| 💾 导出数据表 | 导出为文件 | 格式、保存路径 |

### 添加数据行

以JSON格式添加一行数据：

\`\`\`json
{"商品名称": "iPhone 15", "价格": 5999, "库存": 100}
\`\`\`

### 设置单元格

修改指定位置的数据：

| 参数 | 说明 | 示例 |
|------|------|------|
| 行索引 | 行号（从0开始，支持负数） | 0（第一行）、-1（最后一行） |
| 列名 | 要修改的列 | 价格 |
| 单元格值 | 新的值 | 4999 |

### 获取单元格

读取指定位置的数据到变量：

\`\`\`
行索引：0
列名：商品名称
存储到变量：当前商品
\`\`\`

### 导出数据表

将数据表格导出为文件：

| 参数 | 说明 |
|------|------|
| 导出格式 | Excel (.xlsx) 或 CSV (.csv) |
| 保存路径 | 文件保存目录 |
| 文件名模式 | 支持 {时间戳} 占位符 |
| 存储路径到变量 | 保存导出文件路径的变量名 |

💡 **提示**：点击保存路径输入框右侧的 📁 按钮，可以通过Windows资源管理器直接选择文件夹。

### 查看和编辑数据

1. 打开底部日志面板
2. 切换到**数据表格**标签页
3. 可以看到表格形式的数据预览
4. 点击单元格可以直接编辑
5. 支持添加行、添加列、删除操作

### 导出Excel

1. 在数据表格标签页点击**下载CSV**按钮
2. 或使用**导出数据表**模块自动导出

---

## 📊 数据采集与导出

### 采集数据到表格

1. 使用**获取元素信息**模块
2. 填写**存储的列名**字段
3. 数据会自动收集到数据表格中

**示例**：采集商品列表

\`\`\`
遍历列表（商品选择器列表）
  ├─ 获取元素信息（标题）→ 存储的列名：商品名称
  ├─ 获取元素信息（价格）→ 存储的列名：价格
  └─ 获取元素信息（链接）→ 存储的列名：商品链接
\`\`\`

### 查看采集的数据

1. 打开底部日志面板
2. 切换到**数据表格**标签页
3. 可以看到表格形式的数据预览
4. 支持直接编辑单元格内容

### 导出数据

**方式1：手动导出**
- 在数据表格标签页点击**下载CSV**按钮

**方式2：自动导出**
- 使用**导出数据表**模块
- 可选择Excel或CSV格式
- 支持自定义保存路径和文件名

---

## 🔢 数学运算

### 设置变量（表达式）

可以在设置变量时使用数学表达式：

\`\`\`
{数量} + 1
{价格} * {数量}
{总价} - {折扣}
{总数} / 10
\`\`\`

### 支持的运算符

| 运算符 | 说明 | 示例 |
|--------|------|------|
| + | 加法 | \`{a} + {b}\` |
| - | 减法 | \`{a} - {b}\` |
| * | 乘法 | \`{a} * {b}\` |
| / | 除法 | \`{a} / {b}\` |
| % | 取余 | \`{a} % {b}\` |

---

## 📝 字符串处理

Web RPA 提供了丰富的字符串处理模块，帮助你灵活处理文本数据。

### 字符串处理模块一览

| 模块 | 说明 | 主要用途 |
|------|------|----------|
| ➕ 拼接文本 | 将两个字符串拼接 | 组合文本内容 |
| 🔍 正则提取 | 使用正则表达式提取数据 | 从文本中提取特定格式的数据 |
| 🔄 替换文本 | 替换文本内容 | 修改、清理文本 |
| ✂️ 分割文本 | 按分隔符拆分文本 | 将文本转为列表 |
| 🔗 连接文本 | 将列表合并为文本 | 拼接列表元素 |
| 🧹 去除空白 | 清理空白字符 | 清理文本首尾空格 |
| 🔠 大小写 | 转换字母大小写 | 格式化文本 |
| 📏 截取文本 | 截取部分文本 | 提取子字符串 |

---

### ➕ 拼接文本

将两个字符串拼接成一个新字符串，是最简单直接的文本组合方式。

**配置参数**：

| 参数 | 说明 | 示例 |
|------|------|------|
| 字符串1 | 第一个字符串 | \`你好，\` |
| 字符串2 | 第二个字符串 | \`{用户名}\` |
| 存储到变量 | 结果变量名 | 问候语 |

**示例**：

\`\`\`
字符串1：订单号：
字符串2：{订单ID}
结果：订单号：12345
\`\`\`

**与"连接文本"的区别**：
- **拼接文本**：将两个字符串直接拼接
- **连接文本**：将列表中的多个元素用分隔符连接

---

### 🔍 正则提取

从文本中使用正则表达式提取数据，是最强大的文本处理工具。

**配置参数**：

| 参数 | 说明 | 示例 |
|------|------|------|
| 输入文本 | 要匹配的源文本 | \`{网页内容}\` |
| 正则表达式 | 匹配模式 | \`\\d+\`、\`[a-z]+\` |
| 提取模式 | 提取方式 | 第一个/所有/捕获组 |
| 忽略大小写 | 是否区分大小写 | 勾选则不区分 |

**提取模式说明**：

- **提取第一个匹配**：只返回第一个匹配的内容
- **提取所有匹配**：返回所有匹配的列表
- **提取捕获组**：返回括号()中捕获的内容

**常用正则表达式**：

| 表达式 | 匹配内容 | 示例 |
|--------|----------|------|
| \`\\d+\` | 数字 | 123、456 |
| \`[a-zA-Z]+\` | 英文字母 | hello、World |
| \`[\\u4e00-\\u9fa5]+\` | 中文 | 你好、世界 |
| \`\\d{11}\` | 11位数字（手机号） | 13812345678 |
| \`[\\w.-]+@[\\w.-]+\` | 邮箱 | test@example.com |
| \`https?://[^\\s]+\` | 网址 | https://example.com |
| \`价格[：:](\\d+)\` | 提取价格数字 | 价格:99 → 99 |

**示例**：提取商品价格

\`\`\`
输入文本：商品价格：￥299.00，原价：￥399.00
正则表达式：￥(\\d+\\.?\\d*)
提取模式：提取所有匹配
结果：["299.00", "399.00"]
\`\`\`

---

### 🔄 字符串替换

替换文本中的内容，支持普通文本和正则表达式两种模式。

**配置参数**：

| 参数 | 说明 |
|------|------|
| 输入文本 | 要处理的文本 |
| 替换模式 | 普通文本/正则表达式 |
| 查找内容 | 要查找的文本或正则 |
| 替换为 | 替换后的内容 |
| 替换所有 | 是否替换所有匹配 |

**示例1**：普通替换

\`\`\`
输入：Hello World
查找：World
替换为：RPA
结果：Hello RPA
\`\`\`

**示例2**：正则替换（去除所有数字）

\`\`\`
输入：订单号ABC123DEF456
正则：\\d+
替换为：（空）
结果：订单号ABCDEF
\`\`\`

---

### ✂️ 字符串分割

按指定分隔符将文本拆分为列表。

**配置参数**：

| 参数 | 说明 | 示例 |
|------|------|------|
| 输入文本 | 要分割的文本 | \`苹果,香蕉,橙子\` |
| 分隔符 | 分割依据 | \`,\`、\`|\`、\`\\n\` |
| 最大分割数 | 最多分割几次 | 留空不限制 |

**常用分隔符**：

| 分隔符 | 说明 | 输入示例 |
|--------|------|----------|
| \`,\` | 逗号 | \`a,b,c\` → \`["a","b","c"]\` |
| \`|\` | 竖线 | \`a|b|c\` → \`["a","b","c"]\` |
| \`\\n\` | 换行 | 多行文本 → 每行一个元素 |
| \` \` | 空格 | \`a b c\` → \`["a","b","c"]\` |

**示例**：分割标签

\`\`\`
输入：技术,教程,Python,自动化
分隔符：,
结果：["技术", "教程", "Python", "自动化"]
\`\`\`

---

### 🔗 字符串连接

将列表中的元素连接成一个字符串。

**配置参数**：

| 参数 | 说明 |
|------|------|
| 列表变量名 | 要连接的列表 |
| 连接符 | 元素之间的分隔符 |

**示例**：

\`\`\`
列表：["苹果", "香蕉", "橙子"]
连接符：、
结果：苹果、香蕉、橙子
\`\`\`

---

### 🧹 去除空白

清理文本中的空白字符。

**去除模式**：

| 模式 | 说明 | 示例 |
|------|------|------|
| 去除首尾空白 | 只去除开头和结尾 | \`  hello  \` → \`hello\` |
| 仅去除开头 | 只去除开头空白 | \`  hello  \` → \`hello  \` |
| 仅去除结尾 | 只去除结尾空白 | \`  hello  \` → \`  hello\` |
| 去除所有空白 | 去除所有空格 | \`h e l l o\` → \`hello\` |

---

### 🔠 大小写转换

转换文本的大小写格式。

**转换模式**：

| 模式 | 说明 | 示例 |
|------|------|------|
| 全部大写 | 所有字母转大写 | \`hello\` → \`HELLO\` |
| 全部小写 | 所有字母转小写 | \`HELLO\` → \`hello\` |
| 首字母大写 | 第一个字母大写 | \`hello world\` → \`Hello world\` |
| 每个单词首字母大写 | 标题格式 | \`hello world\` → \`Hello World\` |

---

### 📏 字符串截取

从文本中截取指定范围的子字符串。

**配置参数**：

| 参数 | 说明 | 示例 |
|------|------|------|
| 输入文本 | 源文本 | \`Hello World\` |
| 起始位置 | 开始索引（从0开始） | 0、6、-5 |
| 结束位置 | 结束索引（可选） | 5、-1 |

**索引说明**：

\`\`\`
文本：H e l l o   W o r l  d
索引：0 1 2 3 4 5 6 7 8 9 10
负数：-11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1
\`\`\`

**示例**：

| 输入 | 起始 | 结束 | 结果 |
|------|------|------|------|
| \`Hello World\` | 0 | 5 | \`Hello\` |
| \`Hello World\` | 6 | - | \`World\` |
| \`Hello World\` | -5 | - | \`World\` |
| \`Hello World\` | 0 | -6 | \`Hello\` |

---

### 字符串拼接（变量引用）

除了使用字符串连接模块，还可以直接在文本中混合使用变量：

\`\`\`
{姓} + {名}
https://example.com/user/{用户ID}
{年}-{月}-{日}
\`\`\`

### 常用技巧

**构建URL**：
\`\`\`
https://www.example.com/search?keyword={关键词}&page={页码}
\`\`\`

**构建文件名**：
\`\`\`
数据_{日期}_{序号}.xlsx
\`\`\`

**构建消息**：
\`\`\`
【{网站名}】{商品名} 降价了！现价：{价格}元
\`\`\`

---

## 💡 变量使用技巧

### 1. 命名规范

- 使用有意义的名称：\`商品价格\` 而不是 \`a\`
- 保持一致的命名风格
- 避免使用特殊字符

### 2. 类型注意

- 数字运算前确保变量是数字类型
- 列表操作前确保变量是列表类型
- 类型不对会导致操作失败

### 3. 调试技巧

- 使用**打印日志**输出变量值
- 在日志面板的**变量**标签页查看所有变量
- 变量值显示为 JSON 格式，方便查看复杂数据

### 4. 作用域

- 所有变量都是全局的
- 在任何模块中设置的变量，其他模块都可以访问
- 循环中修改的变量，循环外也能看到修改后的值`
