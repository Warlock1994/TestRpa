export const mediaGuideContent = `# 🎬 媒体处理指南

本章介绍视频、音频、图片等媒体文件的处理功能。所有媒体处理功能基于 FFmpeg 实现，M3U8 下载功能使用专业下载引擎，音频转文本功能基于本地 Whisper 模型实现。

---

## 📋 模块概览

| 模块 | 功能 | 默认超时 |
|------|------|----------|
| 格式转换 | 转换媒体文件格式 | 10分钟 |
| 图片压缩 | 压缩图片减小体积 | 2分钟 |
| 视频压缩 | 压缩视频减小体积 | 30分钟 |
| 提取音频 | 从视频中提取音频 | 5分钟 |
| 视频裁剪 | 截取视频片段 | 10分钟 |
| 媒体合并 | 合并多个媒体文件 | 30分钟 |
| 添加水印 | 给视频添加水印 | 10分钟 |
| M3U8下载 | 下载HLS流媒体视频 | 30分钟 |
| 音频转文本 | 语音识别转文字（本地） | 10分钟 |
| 桌面录制 | 录制屏幕视频 | 10分钟 |
| 二维码生成 | 生成二维码图片 | 30秒 |
| 二维码识别 | 识别二维码内容 | 30秒 |

---

## 📥 M3U8下载

下载 HLS (M3U8) 格式的在线流媒体视频。

### 功能特点

- 全新下载引擎，支持更多加密格式
- 多线程下载，速度更快
- 支持 AES-128、SAMPLE-AES 等加密方式
- 自动合并音视频为 MP4 格式
- 支持自定义 HTTP 请求头和代理

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| M3U8链接 | HLS 播放列表 URL | - |
| 输出目录 | 视频保存目录 | 下载文件夹 |
| 输出文件名 | 保存的文件名（无需扩展名） | 自动生成 |
| 下载线程数 | 并发下载线程数 | 8 |
| 自动选择最佳画质 | 自动选择最高画质轨道 | 是 |
| User-Agent | 自定义浏览器标识 | 默认 |
| Referer | 防盗链来源页面 | 空 |
| 自定义请求头 | 其他 HTTP 请求头 | 空 |
| 使用系统代理 | 是否使用系统代理 | 是 |
| 自定义代理 | 指定代理服务器 | 空 |
| 解密密钥 | 加密视频的解密密钥 | 空 |
| 超时时间 | 下载超时（秒） | 1800 |
| 结果变量 | 保存文件路径的变量 | 空 |

### 示例

\`\`\`
基本下载：
  M3U8链接：https://example.com/video.m3u8
  输出目录：D:/videos
  输出文件名：my_video

带防盗链下载：
  M3U8链接：https://example.com/video.m3u8
  输出目录：D:/videos
  Referer：https://example.com/player
  User-Agent：Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...

使用代理下载：
  M3U8链接：https://example.com/video.m3u8
  输出目录：D:/videos
  自定义代理：http://127.0.0.1:7890
\`\`\`

### ⚠️ 常见问题

| 错误 | 原因 | 解决方案 |
|------|------|----------|
| 403 错误 | 防盗链保护 | 设置正确的 Referer |
| 连接超时 | 网络问题 | 使用代理或检查网络 |
| 解密失败 | 视频加密 | 提供正确的解密密钥 |
| SSL 错误 | 证书问题 | 尝试使用代理 |

### 获取 Referer 的方法

1. 在浏览器中打开视频页面
2. 按 F12 打开开发者工具
3. 切换到 Network 标签
4. 刷新页面，找到 .m3u8 请求
5. 查看请求头中的 Referer 值

---

## 🔄 格式转换

将媒体文件从一种格式转换为另一种格式。

### 配置说明

| 参数 | 说明 |
|------|------|
| 输入文件 | 源文件路径 |
| 输出文件 | 目标文件路径（含扩展名） |
| 输出格式 | 目标格式（mp4/avi/mkv/mp3/wav等） |

### 支持的格式

**视频格式：**
- MP4、AVI、MKV、MOV、WMV、FLV、WebM

**音频格式：**
- MP3、WAV、AAC、FLAC、OGG、M4A

**图片格式：**
- JPG、PNG、GIF、BMP、WebP

### 示例

\`\`\`
视频格式转换：
  输入：D:/videos/source.avi
  输出：D:/videos/output.mp4
  格式：mp4

音频格式转换：
  输入：D:/music/song.flac
  输出：D:/music/song.mp3
  格式：mp3
\`\`\`

---

## 🖼️ 图片压缩

压缩图片文件，减小文件体积。

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 输入文件 | 源图片路径 | - |
| 输出文件 | 压缩后的图片路径 | - |
| 压缩质量 | 1-100，越大质量越好 | 80 |
| 最大宽度 | 限制图片最大宽度 | 不限制 |
| 最大高度 | 限制图片最大高度 | 不限制 |

### 压缩质量参考

| 质量值 | 效果 | 适用场景 |
|--------|------|----------|
| 90-100 | 几乎无损 | 高质量需求 |
| 70-89 | 轻微压缩 | 日常使用 |
| 50-69 | 明显压缩 | 网页展示 |
| 30-49 | 大幅压缩 | 缩略图 |

### 示例

\`\`\`
压缩产品图片：
  输入：D:/images/product.jpg
  输出：D:/images/product_compressed.jpg
  质量：75
  最大宽度：1920

批量压缩（配合循环）：
  遍历列表：{图片列表}
    图片压缩：
      输入：{当前项}
      输出：{当前项}_compressed.jpg
      质量：80
\`\`\`

---

## 🎥 视频压缩

压缩视频文件，减小文件体积。

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 输入文件 | 源视频路径 | - |
| 输出文件 | 压缩后的视频路径 | - |
| 视频码率 | 视频比特率（如 1M, 2M） | 自动 |
| 音频码率 | 音频比特率（如 128k） | 128k |
| 分辨率 | 输出分辨率（如 1280x720） | 保持原始 |
| CRF值 | 质量控制，18-28，越小越好 | 23 |

### CRF值参考

| CRF值 | 质量 | 文件大小 |
|-------|------|----------|
| 18 | 接近无损 | 较大 |
| 23 | 高质量（推荐） | 适中 |
| 28 | 中等质量 | 较小 |
| 35 | 低质量 | 很小 |

### 示例

\`\`\`
压缩高清视频：
  输入：D:/videos/4k_video.mp4
  输出：D:/videos/compressed.mp4
  CRF：23
  分辨率：1920x1080

极限压缩（牺牲质量）：
  输入：D:/videos/large.mp4
  输出：D:/videos/small.mp4
  CRF：28
  视频码率：1M
\`\`\`

### ⚠️ 注意事项

- 视频压缩是耗时操作，大文件可能需要几十分钟
- 默认超时 30 分钟，处理大文件请适当增加
- 压缩过程中会显示进度百分比

---

## 🎵 提取音频

从视频文件中提取音频轨道。

### 配置说明

| 参数 | 说明 |
|------|------|
| 输入视频 | 源视频文件路径 |
| 输出音频 | 音频文件路径 |
| 音频格式 | mp3/wav/aac/flac |
| 音频码率 | 如 128k, 192k, 320k |

### 示例

\`\`\`
提取背景音乐：
  输入：D:/videos/mv.mp4
  输出：D:/music/bgm.mp3
  格式：mp3
  码率：320k

提取无损音频：
  输入：D:/videos/concert.mp4
  输出：D:/music/concert.flac
  格式：flac
\`\`\`

---

## ✂️ 视频裁剪

截取视频的指定时间段。

### 配置说明

| 参数 | 说明 | 格式 |
|------|------|------|
| 输入视频 | 源视频路径 | - |
| 输出视频 | 裁剪后的视频路径 | - |
| 开始时间 | 裁剪起点 | HH:MM:SS 或秒数 |
| 结束时间 | 裁剪终点 | HH:MM:SS 或秒数 |

### 时间格式

- \`00:01:30\` - 1分30秒
- \`90\` - 90秒
- \`00:00:00.500\` - 0.5秒（精确到毫秒）

### 示例

\`\`\`
截取精彩片段：
  输入：D:/videos/full.mp4
  输出：D:/videos/clip.mp4
  开始：00:05:30
  结束：00:08:45

截取前30秒：
  输入：D:/videos/long.mp4
  输出：D:/videos/intro.mp4
  开始：0
  结束：30
\`\`\`

---

## 🔗 媒体合并

将多个媒体文件合并为一个，或将音频添加到视频中。

### 合并类型

| 类型 | 说明 |
|------|------|
| 视频拼接 | 将多个视频首尾相连合并成一个 |
| 音频拼接 | 将多个音频首尾相连合并成一个 |
| 音视频合并 | 将音频轨道添加到视频中 |

### 视频/音频拼接配置

| 参数 | 说明 |
|------|------|
| 输入文件列表 | 要合并的文件路径列表变量 |
| 输出文件 | 合并后的文件路径 |

### 音视频合并配置

| 参数 | 说明 |
|------|------|
| 视频文件 | 源视频文件路径 |
| 音频文件 | 要添加的音频文件路径 |
| 音频处理方式 | 替换原音频 / 与原音频混合 |
| 新音频音量 | 0-2，1.0为原始音量 |
| 原音频音量 | 混合模式下原音频的音量 |

### 音频处理方式说明

**替换原音频：**
- 用新音频完全替换视频原有的音频轨道
- 适合：配音、背景音乐替换、静音视频添加音频

**与原音频混合：**
- 将新音频与视频原有音频混合在一起
- 可分别调整两个音频的音量
- 适合：添加背景音乐、旁白配音

### 示例

\`\`\`
视频拼接：
  合并类型：视频拼接
  输入列表：{视频列表}  # 包含多个视频路径的列表
  输出：D:/videos/complete.mp4

音频拼接：
  合并类型：音频拼接
  输入列表：{音频列表}
  输出：D:/music/playlist.mp3

替换视频音频：
  合并类型：音视频合并
  视频文件：D:/videos/silent.mp4
  音频文件：D:/music/bgm.mp3
  处理方式：替换原音频
  新音频音量：1.0
  输出：D:/videos/with_music.mp4

混合背景音乐：
  合并类型：音视频合并
  视频文件：D:/videos/vlog.mp4
  音频文件：D:/music/bgm.mp3
  处理方式：与原音频混合
  新音频音量：0.3  # 背景音乐音量调低
  原音频音量：1.0  # 保持原声音量
  输出：D:/videos/vlog_with_bgm.mp4
\`\`\`

### ⚠️ 注意事项

- 拼接的文件应具有相同的编码格式
- 不同分辨率的视频拼接可能出现问题
- 建议先统一格式再拼接
- 音视频合并时，音频会自动截断或循环以匹配视频长度

---

## 💧 添加水印

给视频添加图片或文字水印。

### 配置说明

| 参数 | 说明 |
|------|------|
| 输入视频 | 源视频路径 |
| 输出视频 | 添加水印后的视频路径 |
| 水印图片 | 水印图片路径（PNG透明背景最佳） |
| 水印位置 | 左上/右上/左下/右下/居中 |
| 水印透明度 | 0-1，1为完全不透明 |

### 水印位置

| 位置 | 说明 |
|------|------|
| topleft | 左上角 |
| topright | 右上角 |
| bottomleft | 左下角 |
| bottomright | 右下角（推荐） |
| center | 居中 |

### 示例

\`\`\`
添加Logo水印：
  输入：D:/videos/original.mp4
  输出：D:/videos/watermarked.mp4
  水印图片：D:/images/logo.png
  位置：bottomright
  透明度：0.7
\`\`\`

---

## 💡 媒体处理技巧

### 1. 批量处理

\`\`\`
获取文件列表：D:/videos/*.mp4 → {视频列表}
遍历列表：{视频列表}
  视频压缩：
    输入：{当前项}
    输出：{当前项}_compressed.mp4
\`\`\`

### 2. 处理进度

所有媒体处理模块都会在日志中显示处理进度：
\`\`\`
[视频压缩] 进度: 45.2%
[视频压缩] 进度: 67.8%
[视频压缩] 进度: 100%
\`\`\`

### 3. 超时设置

根据文件大小调整超时时间：
- 小文件（<100MB）：默认超时即可
- 中等文件（100MB-1GB）：10-30分钟
- 大文件（>1GB）：1小时以上

### 4. 错误处理

\`\`\`
视频压缩：...
  超时后：跳过
  重试次数：1

条件判断：{上一步成功}
  ├─ 是 → 继续处理
  └─ 否 → 打印日志：压缩失败，跳过此文件
\`\`\`

---

## 🎤 音频转文本

将音频文件中的语音转换为文字，完全本地运行，无需网络。

### 技术说明

- 基于 OpenAI Whisper 模型（faster-whisper 实现）
- 首次使用会自动下载模型到本地
- 支持多种语言自动识别
- 完全离线运行，保护隐私

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 音频文件 | 要识别的音频文件路径 | - |
| 模型大小 | tiny/base/small/medium/large | base |
| 语言 | 指定语言或自动检测 | 自动检测 |
| 结果变量 | 保存识别结果的变量名 | - |

### 模型大小对比

| 模型 | 大小 | 速度 | 准确度 | 适用场景 |
|------|------|------|--------|----------|
| tiny | ~75MB | 最快 | 一般 | 快速测试 |
| base | ~150MB | 快 | 较好 | 日常使用（推荐） |
| small | ~500MB | 中等 | 好 | 较高准确度需求 |
| medium | ~1.5GB | 较慢 | 很好 | 专业场景 |
| large | ~3GB | 慢 | 最好 | 最高准确度需求 |

### 示例

\`\`\`
语音转文字：
  音频文件：D:/audio/meeting.mp3
  模型大小：base
  语言：自动检测
  结果变量：识别文本

打印日志：{识别文本}
\`\`\`

### ⚠️ 注意事项

- 首次使用某个模型会自动下载，需要等待
- 模型文件保存在 backend/data/whisper_models 目录
- 较大的模型需要更多内存和处理时间
- 支持的音频格式：mp3、wav、m4a、flac 等

---

## 🖥️ 桌面录制

录制屏幕内容为视频文件。

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 输出路径 | 视频保存路径 | - |
| 录制时长 | 录制秒数 | 10 |
| 帧率 | 每秒帧数 | 30 |
| 录制区域 | 全屏或指定区域 | 全屏 |

### 示例

\`\`\`
录制操作演示：
  输出路径：D:/videos/demo.mp4
  录制时长：30
  帧率：30
  区域：全屏
\`\`\`

### ⚠️ 注意事项

- 录制过程中请勿移动窗口
- 录制时长与实际视频时长一致
- 建议使用 30fps，更高帧率会增加文件大小

---

## 📱 二维码生成

生成包含指定内容的二维码图片。

### 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 二维码内容 | 要编码的文本或URL | - |
| 输出目录 | 保存二维码的文件夹 | - |
| 图片大小 | 二维码图片尺寸 | 300 |
| 结果变量 | 保存文件路径的变量 | - |

### 示例

\`\`\`
生成网址二维码：
  内容：https://www.example.com
  输出目录：D:/qrcodes
  大小：400
  结果变量：二维码路径

打印日志：二维码已保存到 {二维码路径}
\`\`\`

### 说明

- 文件名自动生成，格式为 qrcode_时间戳.png
- 支持中文内容
- 建议大小在 200-500 之间

---

## 🔍 二维码识别

识别图片中的二维码内容。

### 配置说明

| 参数 | 说明 |
|------|------|
| 图片路径 | 包含二维码的图片文件 |
| 结果变量 | 保存识别结果的变量名 |

### 示例

\`\`\`
识别二维码：
  图片路径：D:/images/qrcode.png
  结果变量：二维码内容

条件判断：{二维码内容} 不为空
  ├─ 是 → 打印日志：识别结果: {二维码内容}
  └─ 否 → 打印日志：未识别到二维码
\`\`\``
