export const tipsTricksContent = `# 💡 技巧与窍门

本章汇总各种实用技巧，帮助你更高效地使用Web RPA。

---

## 🎯 元素选择技巧

### 可视化选择

**Ctrl+点击** 选择器按钮 🎯：
- 进入可视化选择模式
- 在网页上点击目标元素
- 自动生成CSS选择器

**Shift+点击** 选择器按钮：
- 选择相似元素
- 用于批量采集场景
- 自动生成匹配多个元素的选择器

### 元素选择器浏览器复用

元素选择器的浏览器支持智能复用，提升使用体验：

**URL可选**：
- 可以不输入URL直接启动选择器
- 会使用已打开的浏览器当前页面
- 适合在同一页面多次选择元素

**页面复用**：
- 如果输入的URL已经在浏览器中打开，会自动切换到该标签页
- 不会重复打开相同的网页
- 节省加载时间

**浏览器复用**：
- 如果选择器浏览器还开着，会直接复用
- 不需要每次都重新启动浏览器
- 可以在浏览器中自由导航后再选择元素

**使用流程**：
\`\`\`
1. 第一次：输入URL，启动选择器浏览器
2. 选择元素后，浏览器保持打开
3. 下次选择：可以直接启动（不输入URL），使用当前页面
4. 或输入新URL，如果已打开则自动切换
\`\`\`

### 选择器调试

在浏览器开发者工具（F12）中测试：

\`\`\`javascript
// 测试选择器是否正确
document.querySelector('你的选择器')

// 查看选中了多少个元素
document.querySelectorAll('你的选择器').length

// 高亮显示选中的元素
document.querySelector('你的选择器').style.border = '2px solid red'
\`\`\`

### 选择器优先级

1. **ID选择器**（最稳定）：\`#login-btn\`
2. **唯一类名**：\`.submit-button\`
3. **属性选择器**：\`[data-id="123"]\`
4. **组合选择器**：\`.form .btn:last-child\`

### 处理动态选择器

有些网站的类名是动态生成的（如 \`class="css-1a2b3c"\`），解决方法：

1. **使用属性选择器**：\`[data-testid="submit"]\`
2. **使用文本内容**：通过执行JS查找
3. **使用相对位置**：\`.parent > div:nth-child(2)\`

---

## ⏱️ 稳定性技巧

### 合理使用等待

**固定等待 vs 智能等待**：

| 方式 | 优点 | 缺点 |
|------|------|------|
| 固定等待 | 简单直接 | 可能等太久或不够 |
| 等待元素 | 智能高效 | 需要知道等什么元素 |

**建议**：优先使用"等待元素"，固定等待作为补充。

### 等待时机

**需要等待的场景**：
- 页面跳转后
- 点击触发Ajax请求后
- 动画效果完成后
- 弹窗出现/消失后

**等待示例**：
\`\`\`
点击搜索按钮
等待元素：.search-results 出现
获取搜索结果
\`\`\`

### 超时和重试配置

每个模块的高级配置中都有**超时时间**设置，该配置现在会实际生效。当模块执行时间超过设定的超时时间后，会根据"超时后操作"的设置进行处理（重试或跳过）。

**模块默认超时时间**：

系统会根据模块类型自动设置合理的默认超时时间，新建模块时会自动应用：

| 模块分类 | 默认超时 | 说明 |
|----------|----------|------|
| 浏览器操作 | 30秒-60秒 | 网页加载可能较慢 |
| 表单操作 | 30秒 | 元素交互 |
| 数据处理 | 5秒-10秒 | 通常很快 |
| 文件下载 | 5分钟 | 大文件需要时间 |
| 数据库操作 | 30秒-2分钟 | 复杂查询可能慢 |
| AI能力 | 3分钟 | AI响应可能慢 |
| 媒体处理 | 10-30分钟 | FFmpeg操作耗时 |
| 用户交互 | 5分钟 | 等待用户输入 |
| 播放音乐 | 10分钟 | 一首歌3-5分钟 |
| 播放视频 | 2小时 | 视频可能很长 |

**不受超时限制的模块**（超时设为0）：
- 固定等待（wait）
- 循环（loop）
- 遍历列表（foreach）
- 定时任务（scheduled_task）
- 子流程（subflow）
- 分组/便签

**超时后操作**：
- **重试**：超时后按重试次数进行重试
- **跳过**：超时后跳过此模块，直接执行后续流程

**手动调整超时**：
如果默认超时不够，可以在模块的高级配置中手动调整超时时间。

### 处理不稳定元素

**问题**：元素有时能找到，有时找不到

**解决方案**：
1. 增加等待时间
2. 使用更稳定的选择器
3. 添加重试机制
4. 检查是否在iframe中

---

## 🔧 调试技巧

### 使用打印日志

在关键位置添加日志：

\`\`\`
打印日志：=== 开始执行 ===
打印日志：当前URL：{页面URL}
打印日志：获取到的数据：{数据}
打印日志：循环第 {loop_index} 次，当前元素：{item}
打印日志：=== 执行完成 ===
\`\`\`

### 分步测试

1. **先测试单个模块**：确保每个模块单独能工作
2. **再测试小段流程**：2-3个模块组合
3. **最后测试完整流程**：全部模块

### 查看变量值

- 在日志面板的**全局变量**标签页实时查看
- 使用打印日志输出变量值
- 复杂数据会显示为JSON格式
- 循环变量（item、index、loop_index）也会显示在变量提示中

### 常见错误排查

| 错误 | 可能原因 | 解决方法 |
|------|----------|----------|
| 找不到元素 | 选择器错误/元素未加载 | 检查选择器/添加等待 |
| 点击无效 | 元素被遮挡/不可点击 | 滚动到元素/等待可点击 |
| 超时 | 网络慢/页面卡住 | 增加超时时间 |
| 数据为空 | 提取方式错误 | 检查提取类型和选择器 |

---

## 📊 数据采集技巧

### 批量采集流程

\`\`\`
1. 获取列表页所有项目的选择器
2. 遍历每个项目
3. 提取需要的数据
4. 填写Excel列名自动收集
\`\`\`

### 翻页采集

**方法1：点击下一页**
\`\`\`
循环执行
  ├─ 采集当前页
  ├─ 条件判断：有下一页？
  │   ├─ 有 → 点击下一页，等待加载
  │   └─ 无 → 跳出循环
\`\`\`

**方法2：修改URL参数**
\`\`\`
循环执行 10 次
  ├─ 打开网页：https://example.com/list?page={循环索引}
  ├─ 等待加载
  └─ 采集当前页
\`\`\`

### 懒加载页面

\`\`\`
循环执行
  ├─ 记录当前数量
  ├─ 滚动到底部
  ├─ 等待 2 秒
  ├─ 获取新数量
  ├─ 条件判断：新数量 > 原数量？
  │   ├─ 是 → 继续滚动
  │   └─ 否 → 已到底部，跳出循环
\`\`\`

### 数据清洗

**去除空白**：
\`\`\`javascript
return '{原始数据}'.trim();
\`\`\`

**提取数字**：
\`\`\`javascript
return parseFloat('{价格文本}'.replace(/[^0-9.]/g, ''));
\`\`\`

**格式化日期**：
\`\`\`javascript
const date = new Date('{日期文本}');
return date.toISOString().split('T')[0];
\`\`\`

---

## 📁 工作流管理

### 工作流仓库

Web RPA 提供了公共工作流仓库，你可以：

**浏览和下载**：
- 点击工具栏的"工作流仓库"按钮
- 浏览其他用户分享的工作流
- 按分类、关键词搜索
- 支持两种导入方式：
  - **覆盖导入**：替换当前编辑器中的工作流
  - **追加导入**：将工作流追加到当前画布，保留现有内容

**发布分享**：
- 将你的工作流发布到仓库
- 支持两种发布方式：
  - 发布当前正在编辑的工作流
  - 上传JSON文件发布
- 填写名称、描述、分类和标签
- 帮助其他用户解决类似问题

**管理自己的工作流**：
- 系统会记住你发布的工作流
- 点击自己发布的工作流可以看到"删除"按钮
- 只有发布者才能删除自己的工作流

**自定义仓库**：
- 默认使用官方仓库 https://hub.pmhs.top
- 可以在设置中修改为私有仓库地址
- 适合团队内部分享工作流

**注意事项**：
- 发布前确保不包含敏感信息（API Key、密码等）
- 系统会自动过滤部分敏感内容
- 相同的工作流不能重复发布
- 仓库数据会缓存，点击刷新按钮可获取最新数据

### 文件路径选择

在需要填写文件或文件夹路径的输入框中：
- 点击输入框右侧的 📁 按钮
- 通过Windows资源管理器直接选择
- 支持的模块：上传文件、下载文件、保存图片、网页截图、导出数据表等

### 命名规范

**好的命名**：
- \`京东商品价格监控\`
- \`微博自动签到_v2\`
- \`新闻采集_科技频道\`

**不好的命名**：
- \`测试\`
- \`新建工作流\`
- \`111\`

### 版本管理

- 重要修改前先导出备份
- 文件名加上日期或版本号
- 如：\`商品采集_20240101.json\`

### 模块复用

- **Ctrl+C**：复制选中的模块
- **Ctrl+V**：粘贴模块
- 可以跨工作流复制粘贴

### 整理画布

- 保持模块排列整齐
- 相关模块放在一起
- 避免连接线交叉

---

## 🚀 性能优化

### 减少等待时间

- 使用"等待元素"代替固定等待
- 合理设置超时时间
- 避免不必要的等待

### 优化循环

- 减少循环内的重复操作
- 将不变的操作移到循环外
- 使用批量操作代替逐个操作

### 无头模式

在全局配置中启用**无头模式**：
- 浏览器在后台运行
- 不显示界面，速度更快
- 适合稳定运行的任务

### 资源管理

- 及时关闭不需要的标签页
- 避免打开过多页面
- 定期清理变量中的大数据

---

## 🔐 安全建议

### 敏感信息处理

**不要**：
- 在工作流中硬编码密码
- 分享包含敏感信息的工作流
- 在日志中打印密码

**应该**：
- 使用变量存储敏感信息
- 导出前删除敏感数据
- 使用环境变量或配置文件

### API密钥保护

- 不要分享包含API密钥的工作流
- 定期更换密钥
- 使用有限权限的密钥

### 避免被检测

- 添加随机延迟
- 模拟人工操作节奏
- 不要频率过高
- 遵守网站的使用条款

---

## ⌨️ 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+S | 保存当前工作流 |
| Ctrl+C | 复制选中的模块 |
| Ctrl+V | 粘贴模块 |
| Ctrl+Z | 撤销操作 |
| Ctrl+Y | 重做操作 |
| Ctrl+A | 全选所有模块 |
| Ctrl+D | 禁用/启用选中的模块 |
| Delete / Backspace | 删除选中模块 |
| 鼠标拖动画布空白处 | 移动画布视图 |
| 滚轮 | 缩放画布 |
| 拖拽JSON文件到画布 | 导入工作流 |

---

## 🆘 常见问题

### Q: 为什么选择器找不到元素？

**A**: 可能的原因：
1. 选择器写错了 → 用浏览器调试确认
2. 元素还没加载 → 添加等待模块
3. 元素在iframe中 → 需要先切换到iframe
4. 元素是动态生成的 → 使用更稳定的选择器

### Q: 为什么点击没有反应？

**A**: 可能的原因：
1. 元素被其他元素遮挡 → 滚动到元素或关闭遮挡物
2. 元素不可点击 → 等待元素可点击
3. 需要先悬停 → 添加悬停模块
4. 是假按钮 → 尝试执行JS点击

### Q: 为什么数据采集不完整？

**A**: 可能的原因：
1. 页面是懒加载 → 需要滚动加载
2. 选择器只匹配部分元素 → 检查选择器
3. 翻页逻辑有问题 → 检查翻页条件
4. 超时导致中断 → 增加超时时间

### Q: 如何处理验证码？

**A**: 几种方案：
1. AI视觉识别（推荐）
2. 人工输入（用户输入模块）
3. 第三方打码平台
4. 使用已登录的Cookie

### Q: 工作流执行很慢怎么办？

**A**: 优化建议：
1. 减少不必要的等待
2. 使用等待元素代替固定等待
3. 启用无头模式
4. 优化循环逻辑

---

## 📚 学习资源

### CSS选择器
- MDN Web Docs: CSS选择器
- CSS Selector Reference

### 浏览器开发者工具
- Chrome DevTools 官方文档
- 元素检查和调试技巧

### 正则表达式
- 正则表达式入门教程
- 在线正则测试工具

---

🎉 **恭喜你看完了所有教程！**

现在你已经掌握了Web RPA的核心功能和技巧。
最好的学习方式就是动手实践，试着创建自己的自动化工作流吧！

祝你自动化愉快！ 🚀`
